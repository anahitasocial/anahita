/*! anahita 20-08-2020 */

!function(s,t){"use strict";Dropzone.autoDiscover=!1,s.widget("anahita.photoUpload",{_create:function(){var i=this;this.uploadedPhotoIds=[];var t={sending:function(t,e,o){var n=s(i.element).find('select[name="access"]').val();o.append("access",n)},success:function(t,e,o){i.uploadedPhotoIds.push(e.id)},queuecomplete:function(){if(0<i.uploadedPhotoIds.length){var o=i.options.setsUrl;s.each(i.uploadedPhotoIds,function(t,e){o+="&photo_id[]="+e}),s.get(o,function(t){s(i.element).html(t)})}}};t=s.extend({},this.options,t),this.dropzone=new Dropzone(this.options.filedrop,t),this._on(this.element,{'click [data-trigger="UploadPhotos"]':function(t){t.preventDefault(),this.dropzone.enqueueFiles(this.dropzone.getFilesWithStatus(Dropzone.ADDED))}}),this._on(this.element,{'click [data-trigger="RemovePhotos"]':function(t){t.preventDefault(),this.dropzone.removeAllFiles(!0)}})}}),s.widget("photos.photosSetAssignment",{_create:function(){var e=s(this.element).find('input[name="title"]'),o=s(this.element).find('select[name="id"]');this._on(o,{change:function(t){""!=s(t.target).val()?e.attr("disabled",!0):e.attr("disabled",!1)}}),this._on(e,{change:function(t){""!=s(t.target).val()?o.attr("disabled",!0):o.attr("disabled",!1)}})}}),s(document).ajaxSuccess(function(){s("#photos-set-assignment").photosSetAssignment()})}(jQuery,window);