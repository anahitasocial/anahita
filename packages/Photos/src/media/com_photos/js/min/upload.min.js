/*! anahita 20-06-2015 */
!function(a,b){"use strict";Dropzone.autoDiscover=!1,a.widget("anahita.photoUpload",{_create:function(){var b=this;this.uploadedPhotoIds=[];var c={sending:function(b,c,d){var e=a(this.element).find('select[name="access"]').val();d.append("access",e)},success:function(a,c,d){b.uploadedPhotoIds.push(c.id)},queuecomplete:function(){if(b.uploadedPhotoIds.length>0){var c=b.options.setsUrl;a.each(b.uploadedPhotoIds,function(a,b){c+="&photo_id[]="+b}),a.get(c,function(c){a(b.element).html(c)})}}};c=a.extend({},this.options,c),this.dropzone=new Dropzone(this.options.filedrop,c),this._on(this.element,{'click [data-trigger="UploadPhotos"]':function(a){a.preventDefault(),this.dropzone.enqueueFiles(this.dropzone.getFilesWithStatus(Dropzone.ADDED))}}),this._on(this.element,{'click [data-trigger="RemovePhotos"]':function(a){a.preventDefault(),this.dropzone.removeAllFiles(!0)}})}}),a.widget("photos.photosSetAssignment",{_create:function(){var b=a(this.element).find('input[name="title"]'),c=a(this.element).find('select[name="id"]');this._on(c,{change:function(c){""!=a(c.target).val()?b.attr("disabled",!0):b.attr("disabled",!1)}}),this._on(b,{change:function(b){""!=a(b.target).val()?c.attr("disabled",!0):c.attr("disabled",!1)}})}}),a(document).ajaxSuccess(function(){a("#photos-set-assignment").photosSetAssignment()})}(jQuery,window);